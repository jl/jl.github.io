<!DOCTYPE html>
<html>

<head>
  <title>extractdoc bookmarklet</title>
  <style type="text/css">
    #bookmarklet {
      font-size: 200%;
    }

    #bookmarklet :hover {
      background-color: yellow;
    }

    .footer {
      font-size: 70%;
      color: #888;
      margin-top: 4em;
    }

    .printimg {
      width: 245px;
    }
  </style>
</head>

<body>
  <h1>extract doc bookmarklet</h1>

  <p>This bookmarklet will extract images from a document viewer into a new tab
    which can be printed or saved to PDF. Use on desktop browsers. Untested on mobile.</p>

  <div>
    <ol>
      <li>Add "extract doc" as a bookmark.
        <ul>
          <li>Safari/Chrome: open bookmarks, drag the "extract doc" link into bookmarks</li>
          <li>Firefox: right click "extract doc" link, Bookmark Link...</li>
        </ul>
      </li>
      <li>Visit a certain website with documents you want to print or save.</li>
      <li>With the document viewer open to the file you want, activate the "extract doc" bookmark you just created.
      </li>
      <li>This should open a new tab, which (after a brief delay) contains the pages of the document.
        From here you can comfortably read, print, or save to PDF.</li>
    </ol>

    <p>Here is the bookmarklet:</p>
    <p>
      <a href="#" id="bookmarklet">extract doc</a>
    </p>
    <p>
      Note: When printing or saving to PDF, select "Fit to page width" for best results.
      <br>
      <img class="printimg" src="print-options.png">
    </p>

    <p class="footer">For people who want to <a href="extractdoc.js">inspect the code.</a></p>
  </div>

  <script>
    async function doit() {
      const res = await fetch('extractdoc.js');
      const src = await res.text();
      const dst = document.getElementById('bookmarklet');
      dst.href = `javascript: (function() {
        ${src}
      })();`;
    }

    doit();
  </script>
</body>

</html>
